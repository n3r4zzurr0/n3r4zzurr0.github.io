/**!
* video-frames v1.0.x
* (c) Utkarsh Verma
* MIT License
*/
const videoFrames=async t=>{var e,o=0,i=!1,n=!1;const b='call',j='count',k='width',p='height',q='length',v='format',x='onLoad',y='offsets',z='endTime',A='duration',B='startTime',C='onProgress',D='currentTime',E='createElement',r=[],s=t=>+t+""==t+"",a=t=>s(t)&&+t>=0&&+t<=m[A],d=(t,e)=>e instanceof t,h=(e,o)=>{t[e]=c[b](t,e)?t[e]:o},c=Object.prototype.hasOwnProperty,m=document[E]("video");for(m.src=t.url,m.crossOrigin="anonymous",m.onseeked=(async()=>{e&&e()}),m.onerror=(()=>{i=!0});(m[A]===1/0||isNaN(m[A]))&&m.readyState<2&&(await new Promise(t=>setTimeout(t,100)),m[D]=1e7*Math.random(),!i););h(v,"image/png"),h(y,[]),h(B,0),h(z,m[A]),h(j,1),h(x,!1),h(C,!1),d(Array,t[y])?t[y]=t[y].filter(t=>a(t)):t[y]=[],0!==t[y][q]&&(n=!0),a(t[B])||(t[B]=0),a(t[z])||(t[z]=m[A]),t[B]>=t[z]&&(t[B]=t[z],t[j]=1),t[B]=+t[B],t[z]=+t[z],t[j]=Math.abs(~~t[j]),0===t[j]&&(t[j]=1),n&&(t[j]=t[y][q]);const u=(t[z]-t[B])/t[j];var g=c[b](t,k),f=c[b](t,p),T=m.videoWidth/m.videoHeight;g&&!s(t[k])&&(g=!1),f&&!s(t[p])&&(f=!1),g||f?g&&!f?t[p]=t[k]/T:!g&&f&&(t[k]=t[p]*T):(t[k]=128,t[p]=t[k]/T),t[k]=+t[k],t[p]=+t[p],d(Function,t[x])||(t[x]=!1),d(Function,t[C])||(t[C]=!1),t[x]&&t[x]();const w=document[E]("canvas"),l=w.getContext("2d");w[k]=t[k],w[p]=t[p];return new Promise(s=>{i&&s([]),(async i=>{for(;o<t[j];)m[D]=n?t[y][o]:t[B]+o*u,await new Promise(t=>{e=t}),l.clearRect(0,0,w[k],w[p]),l.drawImage(m,0,0,w[k],w[p]),r.push({offset:m[D],image:w.toDataURL(t[v])}),o++,t[C]&&t[C](o,t[j]);i(r)})(s)})};
