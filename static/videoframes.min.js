const videoFrames=async t=>{var e,o=0,n=!1,i=!1;const b='call',j='count',k='width',p='height',q='length',v='format',x='onLoad',y='offsets',z='endTime',A='duration',B='startTime',C='onProgress',D='currentTime',E='createElement',r=[],s=t=>+t+""==t+"",a=t=>s(t)&&+t>=0&&+t<=m[A],h=(t,e)=>e instanceof t,d=(e,o)=>{t[e]=c[b](t,e)?t[e]:o},c=Object.prototype.hasOwnProperty,m=document[E]("video");for(m.src=t.url,m.crossOrigin="anonymous",m.onseeked=(async()=>{e&&e()}),m.onerror=(()=>{n=!0});(m[A]===1/0||isNaN(m[A]))&&m.readyState<2&&(await new Promise(t=>setTimeout(t,100)),m[D]=1e7*Math.random(),!n););d(v,"image/png"),d(y,[]),d(B,0),d(z,m[A]),d(j,1),d(x,!1),d(C,!1),h(Array,t[y])?t[y]=t[y].filter(t=>a(t)):t[y]=[],0!==t[y][q]&&(i=!0),a(t[B])||(t[B]=0),a(t[z])||(t[z]=m[A]),t[B]>=t[z]&&(t[B]=t[z],t[j]=1),t[j]=Math.abs(~~t[j]),0===t[j]&&(t[j]=1),i&&(t[j]=t[y][q]);const u=(t[z]-t[B])/t[j];var g=c[b](t,k),f=c[b](t,p),w=m.videoWidth/m.videoHeight;g&&!s(t[k])&&(g=!1),f&&!s(t[p])&&(f=!1),g||f?g&&!f?t[p]=t[k]/w:!g&&f&&(t[k]=t[p]*w):(t[k]=128,t[p]=t[k]/w),t[k]=+t[k],t[p]=+t[p],h(Function,t[x])||(t[x]=!1),h(Function,t[C])||(t[C]=!1),t[x]&&t[x]();const T=document[E]("canvas"),l=T.getContext("2d");T[k]=t[k],T[p]=t[p];return new Promise(s=>{n&&s([]),(async n=>{for(;o<t[j];)m[D]=i?t[y][o]:t[B]+o*u,await new Promise(t=>{e=t}),l.clearRect(0,0,T[k],T[p]),l.drawImage(m,0,0,T[k],T[p]),r.push({offset:m[D],image:T.toDataURL(t[v])}),o++,t[C]&&t[C](o,t[j]);n(r)})(s)})};
